totem {
    version: 2
    cluster_name: {{ cluster_name }}
    transport: udpu
    token: 3000
    token_retransmits_before_loss_const: 10
    join: 60
    consensus: 3600
    vsftype: none
    max_messages: 20
    clear_node_high_bit: yes
    crypto_cipher: none
    crypto_hash: none
    rrp_mode: none
    interface {
        ringnumber: 0
        bindnetaddr: {{ bindnetaddr }}
        mcastport: {{ mcastport }}
        ttl: 1
    }
}

amf {
    mode: disabled
}

service {
    ver: 0
    name: pacemaker
}

aisexec {
    user: root
    group: root
}

logging {
    fileline: off
    to_stderr: yes
    to_logfile: yes
    logfile: /var/log/corosync/corosync.log
    logfile_priority: info
    to_syslog: no
    syslog_facility: daemon
    debug: off
    timestamp: on
    logger_subsys {
        subsys: AMF
        debug: off
        tags: enter|leave|trace1|trace2|trace3|trace4|trace6
    }
}

nodelist {
{% for node in cluster_nodes %}
  node {
    ring0_addr: {{ node.ip }}
    name: {{ node.name }}
    nodeid: {{ node.nodeid }}
  }
{% endfor %}
}

quorum {
    provider: corosync_votequorum
    two_node: 1
    expected_votes: {{ cluster_nodes | length }}
}
